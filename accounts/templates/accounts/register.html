{% extends 'layout/base.html' %}

{% block title %}Register{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8">
  <div class="max-w-2xl mx-auto">
    <div class="bg-white shadow-xl rounded-lg overflow-hidden">
      <!-- Card Header -->
      <div class="bg-gradient-to-r from-blue-600 to-blue-500 py-6 px-8">
        <h2 class="text-2xl font-bold text-white">Create Your Account</h2>
        <p class="mt-1 text-blue-100">Join our community today</p>
      </div>
      
      <!-- Card Body -->
      <div class="p-8">
        <form method="POST" enctype="multipart/form-data" class="space-y-6">
          {% csrf_token %}
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Username -->
            <div>
              <label for="id_username" class="block text-sm font-medium text-gray-700 mb-1">Username</label>
              {{ form.username }}
              <p class="mt-1 text-sm text-gray-500">Choose a unique username</p>
            </div>
            
            <!-- Email -->
            <div>
              <label for="id_email" class="block text-sm font-medium text-gray-700 mb-1">Email</label>
              {{ form.email }}
            </div>
            
            <!-- Password -->
            <div>
              <label for="id_password1" class="block text-sm font-medium text-gray-700 mb-1">Password</label>
              <div class="relative">
                {{ form.password1 }}
                <button type="button" class="absolute inset-y-0 right-0 pr-3 flex items-center toggle-password">
                  <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M10 12a2 2 0 100-4 2 2 0 000 4z" />
                    <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd" />
                  </svg>
                </button>
              </div>
            </div>
            
            <!-- Confirm Password -->
            <div>
              <label for="id_password2" class="block text-sm font-medium text-gray-700 mb-1">Confirm Password</label>
              <div class="relative">
                {{ form.password2 }}
                <button type="button" class="absolute inset-y-0 right-0 pr-3 flex items-center toggle-password">
                  <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M10 12a2 2 0 100-4 2 2 0 000 4z" />
                    <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd" />
                  </svg>
                </button>
              </div>
            </div>
            
            <!-- First Name -->
            <div>
              <label for="id_first_name" class="block text-sm font-medium text-gray-700 mb-1">First Name</label>
              {{ form.first_name }}
            </div>
            
            <!-- Last Name -->
            <div>
              <label for="id_last_name" class="block text-sm font-medium text-gray-700 mb-1">Last Name</label>
              {{ form.last_name }}
            </div>
            
            <!-- Phone Number -->
            <div>
              <label for="id_phone_number" class="block text-sm font-medium text-gray-700 mb-1">Phone Number</label>
              {{ form.phone_number }}
            </div>
            
            <!-- Birth Date -->
            <div>
              <label for="id_birth_date" class="block text-sm font-medium text-gray-700 mb-1">Birth Date</label>
              {{ form.birth_date }}
            </div>
          </div>
          
          <!-- Address (Full Width) -->
          <div>
            <label for="id_address" class="block text-sm font-medium text-gray-700 mb-1">Address</label>
            {{ form.address }}
          </div>
          
          <!-- Profile Picture and Promotions -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <label for="id_profile_picture" class="block text-sm font-medium text-gray-700 mb-1">Profile Picture</label>
              <div class="mt-1 flex items-center">
                <label for="id_profile_picture" class="cursor-pointer">
                  <div class="flex items-center justify-center px-6 py-3 border-2 border-gray-300 border-dashed rounded-md bg-gray-50 hover:bg-gray-100 transition-colors duration-200">
                    <svg class="h-12 w-12 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48">
                      <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    <span class="ml-2 text-sm text-gray-600">Upload a photo</span>
                    {{ form.profile_picture }}
                  </div>
                </label>
              </div>
            </div>
            
            <div class="flex items-center">
              <div class="flex items-center h-5">
                {{ form.receive_promotions }}
              </div>
              <div class="ml-3 text-sm">
                <label for="id_receive_promotions" class="font-medium text-gray-700">Receive promotions and updates</label>
                <p class="text-gray-500">Get the latest news and special offers</p>
              </div>
            </div>
          </div>
          
          <!-- Submit Button -->
          <div class="pt-4">
            <button type="submit" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200">
              Register Now
            </button>
          </div>
        </form>
      </div>
      
      <!-- Card Footer -->
      <div class="bg-gray-50 px-8 py-4 border-t border-gray-200">
        <p class="text-sm text-gray-600 text-center">
          Already have an account? <a href="{% url 'login' %}" class="font-medium text-blue-600 hover:text-blue-500">Sign In</a>
        </p>
      </div>
    </div>
  </div>
</div>

<script>
  // Toggle password visibility
  document.querySelectorAll('.toggle-password').forEach(button => {
    button.addEventListener('click', function() {
      const input = this.closest('.relative').querySelector('input');
      const icon = this.querySelector('svg');
      
      if (input.type === 'password') {
        input.type = 'text';
        icon.innerHTML = '<path fill-rule="evenodd" d="M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z" clip-rule="evenodd" /><path d="M12.454 16.697L9.75 13.992a4 4 0 01-3.742-3.741L2.335 6.578A9.98 9.98 0 00.458 10c1.274 4.057 5.065 7 9.542 7 .847 0 1.669-.105 2.454-.303z" />';
      } else {
        input.type = 'password';
        icon.innerHTML = '<path d="M10 12a2 2 0 100-4 2 2 0 000 4z" /><path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd" />';
      }
    });
  });

  // Style form inputs with Tailwind classes
  document.querySelectorAll('input:not([type=checkbox]), textarea, select').forEach(input => {
    input.classList.add(
      'block', 'w-full', 'px-3', 'py-2', 'border', 'border-gray-300', 
      'rounded-md', 'shadow-sm', 'focus:outline-none', 'focus:ring-blue-500', 
      'focus:border-blue-500', 'sm:text-sm'
    );
  });

  // Style checkbox
  document.querySelectorAll('input[type=checkbox]').forEach(checkbox => {
    checkbox.classList.add(
      'focus:ring-blue-500', 'h-4', 'w-4', 'text-blue-600', 'border-gray-300', 'rounded'
    );
  });
</script>

<style>
  /* Custom styles for file input */
  input[type="file"] {
    opacity: 0;
    width: 0.1px;
    height: 0.1px;
    position: absolute;
  }
</style>
{% endblock %}